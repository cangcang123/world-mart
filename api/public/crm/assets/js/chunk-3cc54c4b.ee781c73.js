(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cc54c4b"],{2294:function(e,t,r){"use strict";var i=r("a4d4"),a=r.n(i);a.a},"4c91":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page",[r("page-header",{attrs:{header:"📦 Edit Product"}}),e.item?r("page-body",{staticClass:"p-3"},[r("b-row",[r("b-col",{attrs:{lg:"6"}},[r("b-card",{attrs:{"bg-variant":"light","text-variant":"dark","header-bg-variant":"dark","header-text-variant":"white"}},[r("input-field",{attrs:{field:e.getField("name"),state:e.$v.item["name"]&&e.$v.item["name"].$dirty?!e.$v.item["name"].$error:null,error:e.fieldError(e.getField("name"))},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}}),r("input-field",{attrs:{field:e.getField("meta_title"),state:e.$v.item["meta_title"]&&e.$v.item["meta_title"].$dirty?!e.$v.item["meta_title"].$error:null,error:e.fieldError(e.getField("meta_title"))},model:{value:e.item.meta_title,callback:function(t){e.$set(e.item,"meta_title",t)},expression:"item.meta_title"}}),r("input-field",{attrs:{field:e.getField("meta_content"),state:e.$v.item["meta_content"]&&e.$v.item["meta_content"].$dirty?!e.$v.item["meta_content"].$error:null,error:e.fieldError(e.getField("meta_content"))}},[r("b-textarea",{attrs:{rows:"13"},model:{value:e.item.meta_content,callback:function(t){e.$set(e.item,"meta_content",t)},expression:"item.meta_content"}})],1),r("input-field",{attrs:{field:e.getField("sub_description"),state:e.$v.item["sub_description"]&&e.$v.item["sub_description"].$dirty?!e.$v.item["sub_description"].$error:null,error:e.fieldError(e.getField("sub_description"))}},[r("b-textarea",{attrs:{rows:"13"},model:{value:e.item.sub_description,callback:function(t){e.$set(e.item,"sub_description",t)},expression:"item.sub_description"}})],1),r("input-field",{attrs:{field:e.getField("description"),state:e.$v.item["description"]&&e.$v.item["description"].$dirty?!e.$v.item["description"].$error:null,error:e.fieldError(e.getField("description"))}},[r("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.item.description,callback:function(t){e.$set(e.item,"description",t)},expression:"item.description"}})],1),r("input-field",{attrs:{field:e.getField("usage"),state:e.$v.item["usage"]&&e.$v.item["usage"].$dirty?!e.$v.item["usage"].$error:null,error:e.fieldError(e.getField("usage"))}},[r("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.item.usage,callback:function(t){e.$set(e.item,"usage",t)},expression:"item.usage"}})],1),r("input-field",{attrs:{field:e.getField("question_answer"),state:e.$v.item["question_answer"]&&e.$v.item["question_answer"].$dirty?!e.$v.item["question_answer"].$error:null,error:e.fieldError(e.getField("question_answer"))}},[r("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.item.question_answer,callback:function(t){e.$set(e.item,"question_answer",t)},expression:"item.question_answer"}})],1)],1)],1),r("b-col",{attrs:{lg:"6"}},[r("b-card",{attrs:{"bg-variant":"light","text-variant":"dark","header-bg-variant":"dark","header-text-variant":"white"}},[r("input-field",{attrs:{field:e.getField("status")},model:{value:e.item.status,callback:function(t){e.$set(e.item,"status",t)},expression:"item.status"}}),r("input-field",{attrs:{field:e.getField("is_hot")},model:{value:e.item.is_hot,callback:function(t){e.$set(e.item,"is_hot",t)},expression:"item.is_hot"}}),r("input-field",{attrs:{field:e.getField("is_new")},model:{value:e.item.is_new,callback:function(t){e.$set(e.item,"is_new",t)},expression:"item.is_new"}}),r("input-field",{attrs:{field:e.getField("is_profit")},model:{value:e.item.is_profit,callback:function(t){e.$set(e.item,"is_profit",t)},expression:"item.is_profit"}}),r("input-field",{attrs:{field:e.getField("best_seller")},model:{value:e.item.best_seller,callback:function(t){e.$set(e.item,"best_seller",t)},expression:"item.best_seller"}}),r("input-field",{attrs:{field:e.getField("price"),state:e.$v.item["price"]&&e.$v.item["price"].$dirty?!e.$v.item["price"].$error:null,error:e.fieldError(e.getField("price"))},model:{value:e.item.price,callback:function(t){e.$set(e.item,"price",t)},expression:"item.price"}}),r("input-field",{attrs:{field:e.getField("quota"),state:e.$v.item["quota"]&&e.$v.item["quota"].$dirty?!e.$v.item["quota"].$error:null,error:e.fieldError(e.getField("quota"))},model:{value:e.item.quota,callback:function(t){e.$set(e.item,"quota",t)},expression:"item.quota"}}),r("input-field",{attrs:{field:e.getField("discount"),state:e.$v.item["discount"]&&e.$v.item["discount"].$dirty?!e.$v.item["discount"].$error:null,error:e.fieldError(e.getField("discount"))},model:{value:e.item.discount,callback:function(t){e.$set(e.item,"discount",t)},expression:"item.discount"}}),r("input-field",{attrs:{field:e.getField("bonus_rating"),state:e.$v.item["bonus_rating"]&&e.$v.item["bonus_rating"].$dirty?!e.$v.item["bonus_rating"].$error:null,error:e.fieldError(e.getField("bonus_rating"))},model:{value:e.item.bonus_rating,callback:function(t){e.$set(e.item,"bonus_rating",t)},expression:"item.bonus_rating"}}),r("input-field",{attrs:{field:e.getField("bonus_referral"),state:e.$v.item["bonus_referral"]&&e.$v.item["bonus_referral"].$dirty?!e.$v.item["bonus_referral"].$error:null,error:e.fieldError(e.getField("bonus_referral"))},model:{value:e.item.bonus_referral,callback:function(t){e.$set(e.item,"bonus_referral",t)},expression:"item.bonus_referral"}})],1),r("b-card",{attrs:{"bg-variant":"light","text-variant":"dark","header-bg-variant":"dark","header-text-variant":"white"}},[r("input-field",{attrs:{field:e.getField("brand"),state:e.$v.item["brand"]&&e.$v.item["brand"].$dirty?!e.$v.item["brand"].$error:null,error:e.fieldError(e.getField("brand"))},model:{value:e.item.brand,callback:function(t){e.$set(e.item,"brand",t)},expression:"item.brand"}}),r("input-field",{attrs:{field:e.getField("category"),state:e.$v.item["category"]&&e.$v.item["category"].$dirty?!e.$v.item["category"].$error:null,error:e.fieldError(e.getField("category"))},model:{value:e.item.category,callback:function(t){e.$set(e.item,"category",t)},expression:"item.category"}}),r("input-field",{attrs:{field:e.getField("origin"),state:e.$v.item["origin"]&&e.$v.item["origin"].$dirty?!e.$v.item["origin"].$error:null,error:e.fieldError(e.getField("origin"))},model:{value:e.item.origin,callback:function(t){e.$set(e.item,"origin",t)},expression:"item.origin"}}),r("input-field",{attrs:{field:e.getField("promotion"),state:e.$v.item["promotion"]&&e.$v.item["promotion"].$dirty?!e.$v.item["promotion"].$error:null,error:e.fieldError(e.getField("promotion"))},model:{value:e.item.promotion,callback:function(t){e.$set(e.item,"promotion",t)},expression:"item.promotion"}}),r("b-card",{attrs:{header:"Cover","border-variant":"danger"}},[r("b-card-text",{staticClass:"text-muted"},[e._v("Ratio 16:10 (Recommend: 640 x 400 pixels)")]),r("div",{staticClass:"center"},[r("image-input",{attrs:{"aspect-ratio":1.6},model:{value:e.item.cover_photo,callback:function(t){e.$set(e.item,"cover_photo",t)},expression:"item.cover_photo"}})],1)],1),r("b-card",{attrs:{header:"Images","border-variant":"danger"}},[r("b-card-text",{staticClass:"text-muted"},[e._v("Ratio 16:10 (Recommend: 640 x 400 pixels)")]),r("div",{staticClass:"center"},[r("image-multi",{attrs:{limit:10},model:{value:e.list_images,callback:function(t){e.list_images=t},expression:"list_images"}})],1)],1),r("div",{staticClass:"text-center"},[r("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-5 w-25 mdi mdi-content-save",attrs:{variant:"success",title:"Save"},on:{click:e.save}}),r("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"w-25 mdi mdi-undo",attrs:{to:{name:"ProductList"},title:"Back"}})],1)],1)],1)],1),r("b-col",{attrs:{lg:"12"}},[r("div",{staticStyle:{position:"relative","overflow-y":"auto",height:"auto"},attrs:{id:"listgroup-ex"}},[r("b-card",{attrs:{"bg-variant":"white","text-variant":"dark",header:"Product SKUS","header-bg-variant":"light","header-text-variant":"info"}},[r("b-row",[r("b-col",[e.item?r("sku-component",{attrs:{product_id:e.item.id}}):e._e()],1)],1)],1)],1)])],1):e._e()],1)},a=[],n=(r("7db0"),r("5530")),o=(r("96cf"),r("1da1")),s=(r("bc3a"),r("e993")),l=r("88f5"),u=r("9648"),c=r.n(u),d=r("a2b6"),m=r("67d8"),p=r("b5ae"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{},[r("b-button",{attrs:{to:{name:"ProductSkuAdd",params:{id:e.product_id}},size:"sm",variant:"info"}},[e._v("+ Add SKU")])],1),e.loading?e._e():r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.skus}},[r("el-table-column",{attrs:{prop:"sku",label:"SKU"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.new_sku?e._t("default",[r("el-input",{attrs:{placeholder:"Enter SKU"},model:{value:t.row.sku,callback:function(r){e.$set(t.row,"sku",r)},expression:"scope.row.sku"}})]):e._t("default",[e._v(" "+e._s(t.row.sku)+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"name",label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.new_sku?e._t("default",[r("el-input",{attrs:{placeholder:"Enter name"},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]):e._t("default",[e._v(" "+e._s(t.row.name)+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{prop:"price",label:"Price"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.new_sku?e._t("default",[r("el-input",{attrs:{placeholder:"Enter Price"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]):e._t("default",[e._v(" "+e._s(t.row.price)+" ")])]}}],null,!0)}),r("el-table-column",{attrs:{fixed:"right",label:"Options"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{name:"SkusEdit",params:{id:t.row.id},query:{product_id:e.product_id}}}},[r("el-button",{staticClass:"mr-2",attrs:{type:"text",size:"small"}},[e._v("Edit")])],1),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.deleteSku(t.$index,t.row)}}},[e._v("Delete")])]}}],null,!1,3521520590)})],1)],1)},b=[],g=(r("a434"),r("be3b")),v={props:{product_id:{required:!0,type:String}},data:function(){return{edittingSku:"",loading:!1,skus:[]}},methods:{deleteSku:function(e,t){var r=this;if(!t.new_sku){var i="https://worldmart.biz/api",a=Object(d["a"])(i,"crm/skus/"+t.id);return g["a"].delete(a).then((function(t){r.skus.splice(e,1)}))}this.skus.splice(e,1),this.addingSku=!1},getSkus:function(){var e=this,t="https://worldmart.biz/api",r=Object(d["a"])(t,"crm/skus/product/"+this.product_id);return this.loading=!0,g["a"].get(r).then((function(t){e.skus=t.data,e.loading=!1}))}},mounted:function(){this.getSkus()}},h=v,_=r("2877"),k=Object(_["a"])(h,f,b,!1,null,null,null),$=k.exports,y={name:"ProductEdit",mixins:[l["a"],m["a"]],components:{SkuComponent:$},data:function(){return{editor:c.a,editorConfig:{simpleUpload:{uploadUrl:Object(d["a"])("https://worldmart.biz/api","admin/upload/image"),headers:{Authorization:"Bearer "+this.$store.state.auth.token}}},list_images:[],state:0,fields:s["a"],entry:"crm/product",displayFields:["name","description","meta_title","price","meta_content","image_url","cover_photo","status"]}},mounted:function(){this.getData()},methods:{afterGotData:function(e){if(!e)return this.$router.back();e.image_url=JSON.parse(e.image_url||"[]"),this.list_images=e.image_url},beforeSave:function(){return"string"!==typeof this.list_images&&(this.item.image_url=this.list_images,this.item.image_url=JSON.stringify(this.item.image_url)),this.$v.item.$touch(),!this.$v.item.$anyError},afterSave:function(e){var t=this;this.$confirm("Tạo thêm sản phẩm mới?","Thông báo",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$router.push({name:"ProductAdd"});case 1:case"end":return e.stop()}}),e)}))))},getField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.fields.find((function(t){return t.key==e}));return r?Object(n["a"])({},r,{},t):null}},validations:{item:{name:{required:p["required"],minLength:Object(p["minLength"])(2),maxLength:Object(p["maxLength"])(255)},price:{required:p["required"],decimal:p["decimal"]},bonus_rating:{required:p["required"],decimal:p["decimal"]},bonus_referral:{required:p["required"],decimal:p["decimal"]}}}},x=y,w=(r("2294"),Object(_["a"])(x,i,a,!1,null,null,null));t["default"]=w.exports},"88f5":function(e,t,r){"use strict";r("4de4"),r("7db0"),r("d81d"),r("a9e3"),r("96cf");var i=r("1da1"),a=r("9c8c");t["a"]={props:{id:{type:[String,Number],required:!0}},data:function(){return{fields:[],displayFields:[],item:null,loading:!1}},computed:{editFields:function(){var e=this;return this.displayFields.map((function(t){return e.fields.find((function(e){return e.key===t}))})).filter((function(e){return e}))}},created:function(){this.$service=new a["a"](this.entry),this.displayFields.length||(this.displayFields=this.fields.map((function(e){return e.key})))},methods:{getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$service.detail(e.id);case 3:r=t.sent,"function"===typeof e.afterGotData&&e.afterGotData(r),e.item=r,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,"function"!==typeof e.beforeSave){t.next=4;break}if(!1!==e.beforeSave()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$service.update(e.id,e.item).catch((function(t){e.$bvToast.toast(t.response&&t.response.data&&t.response.data.message||t.message,{title:"Error",variant:"danger"})}));case 6:r=t.sent,"function"===typeof e.afterSave&&e.afterSave(r),r&&(e.item=r,e.$bvToast.toast("Item has been updated",{title:"Success",variant:"success"})),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()},requestDelete:function(){var e=this;this.$bvModal.msgBoxConfirm("Please confirm that you want to delete this item.",{title:"Please Confirm",okVariant:"danger",okTitle:"YES"}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,e.$service.delete(e.id);case 3:i=t.sent,i?(e.$router.back(),e.$message({message:"This item deleted successful",type:"warning"})):e.$message.error("⚠️☠️⛔ Oops!");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e.message)}))}}}},a4d4:function(e,t,r){},e993:function(e,t,r){"use strict";r("d81d"),r("b0c0"),r("96cf");var i=r("1da1"),a=r("4360"),n=r("aca0");t["a"]=[{key:"id",readonly:!0,sortable:!0},{label:"Image",key:"image_url",type:"image_multi"},{label:"Cover",key:"cover_photo",type:"image"},{label:"Tên sản phẩm",key:"name",sortable:!0},{label:"Thông tin chi tiết",key:"description"},{label:"Mô tả sản phẩm",key:"sub_description"},{label:"Hỏi đáp",key:"question_answer"},{label:"Giá sản phẩm",key:"price",type:"number",sortable:!0},{label:"Tiền tệ",key:"currency",sortable:!0},{label:"Giảm giá (%)",key:"discount",type:"number",sortable:!0},{label:"Số lượng",key:"quota",type:"number",sortable:!0},{label:"Hoa Hồng (%)/Sản phẩm",key:"bonus_rating",type:"number",sortable:!0},{label:"Hoa Hồng người giới thiệu",key:"bonus_referral",type:"number",sortable:!0},{label:"Short Title",key:"meta_title"},{label:"Short Content",key:"meta_content"},{label:"Hướng dẫn sử dụng",key:"usage"},{label:"Xuất xứ",key:"origin",type:"select",sortable:!0,options:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a["a"].state.crm.countries.length){e.next=3;break}return e.next=3,a["a"].dispatch("crm/getCountries");case 3:return e.abrupt("return",n["a"].geoToSelectCountry(a["a"].state.crm.countries));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"category",label:"Category",type:"select",sortable:!0,options:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a["a"].state.crm.category.length){e.next=3;break}return e.next=3,a["a"].dispatch("crm/getCategories");case 3:return e.abrupt("return",a["a"].state.crm.category.map((function(e){return{text:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"brand",label:"Nhãn hàng",type:"select",sortable:!0,options:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a["a"].state.crm.brand.length){e.next=3;break}return e.next=3,a["a"].dispatch("crm/getBrands");case 3:return e.abrupt("return",a["a"].state.crm.brand.map((function(e){return{text:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{label:"Promotion",key:"promotion",type:"select",sortable:!0,options:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a["a"].state.crm.promotion.length){e.next=3;break}return e.next=3,a["a"].dispatch("crm/getPromotions");case 3:return e.abrupt("return",a["a"].state.crm.promotion.map((function(e){return{text:e.name,value:e.id}})));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{label:"Slug",key:"slug",readonly:!0,sortable:!0},{label:"Total Like",key:"total_like",readonly:!0,sortable:!0},{label:"Top Product",key:"is_hot",type:"select",sortable:!0,options:[{value:1,text:"On"},{value:2,text:"Off"}]},{label:"New Product",key:"is_new",type:"select",sortable:!0,options:[{value:1,text:"Yes"},{value:2,text:"No"}]},{label:"Best Selling",key:"best_seller",type:"select",sortable:!0,options:[{value:1,text:"Yes"},{value:2,text:"No"}]},{label:"High Profit",key:"is_profit",type:"select",sortable:!0,options:[{value:1,text:"Yes"},{value:2,text:"No"}]},{label:"Status",key:"status",type:"select",sortable:!0,options:[{value:1,text:"On"},{value:2,text:"Off"}]},{label:"Created Date",key:"created_at",sortable:!0,readonly:!0}]}}]);